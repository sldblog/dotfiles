#!/bin/bash

DOTFILES="$(cd $(dirname $0)/.. && pwd)"

function symlink_files {
  for file in .zshenv .zshrc .gemrc .gitconfig .vimrc .agignore .iex.exs; do
    ln -si $DOTFILES/$file $HOME/$file && echo "$HOME/$file linked"
  done
  ln -si $DOTFILES/vscode.user-settings.json "$HOME/Library/Application Support/Code/User/settings.json"
  mkdir -p $HOME/.lein
  ln -si lein-profiles.clj $HOME/.lein/profiles.clj && echo "$HOME/.lein/profiles.clj linked"
}

function install_dependencies {
  brew bundle --file=$DOTFILES/Brewfile
  pip install --upgrade --requirement $DOTFILES/Pipfile
}

function install_zsh_addons {
  theme_file="$HOME/.oh-my-zsh/themes/bullet-train.zsh-theme"
  rm -f $theme_file
  curl --silent https://raw.githubusercontent.com/caiogondim/bullet-train-oh-my-zsh-theme/master/bullet-train.zsh-theme \
    -o $theme_file && echo "zsh theme $(basename $theme_file) installed"
}

function install_vim_addons {
  mkdir -p $HOME/.vim/bundle/
  git clone https://github.com/VundleVim/Vundle.vim.git $HOME/.vim/bundle/Vundle.vim
  vim +PluginInstall +qall && echo "vim plugins installed"
}

symlink_files
install_dependencies
install_vim_addons
install_zsh_addons
